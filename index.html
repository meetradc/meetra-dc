<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Meetra.to | Meet in Real Life</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root {
  --primary:#3259e8;
  --dark:#111;
  --muted:#666;
  --bg:#f8fafc;
}

body {
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:white;
  color:var(--dark);
}

.container {
  max-width:1100px;
  margin:auto;
  padding:24px;
}

.logo {
  font-size:2rem;
  font-weight:900;
}
.logo span { color:var(--primary); }

.landing {
  text-align:center;
  padding:80px 20px;
}

.landing p {
  font-size:1.2rem;
  color:var(--muted);
  margin-bottom:30px;
}

.panel {
  border:1px solid #eee;
  border-radius:18px;
  padding:22px;
  margin-bottom:20px;
  background:white;
}

input {
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid #ddd;
  margin-bottom:12px;
}

button {
  padding:12px 16px;
  border-radius:12px;
  border:none;
  background:var(--primary);
  color:white;
  font-weight:700;
  cursor:pointer;
}

.secondary {
  background:#eee;
  color:#111;
}

.attendee {
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
}

.match { color:var(--primary); font-weight:800 }

#chat {
  border:1px solid #eee;
  border-radius:12px;
  padding:10px;
  height:180px;
  overflow:auto;
  margin-bottom:10px;
  background:var(--bg);
}

.venue {
  border:1px solid #eee;
  border-radius:14px;
  margin-bottom:14px;
  overflow:hidden;
}

.venue img {
  width:100%;
  height:120px;
  object-fit:cover;
}

.venue div {
  padding:10px;
}

.locked {
  opacity:.4;
  pointer-events:none;
}

.exit {
  margin-top:10px;
}
</style>
</head>

<body>
<div class="container">

<!-- LANDING -->
<div class="landing" id="landing">
  <div class="logo">Meetra<span>.to</span></div>
  <p>Meet people with shared interests — in real places.</p>

  <div class="panel" style="max-width:420px;margin:auto">
    <input id="name" placeholder="Your name">
    <input id="interest" placeholder="Interest (dog walk, chess, tech)">
    <button onclick="join()">Join</button>
  </div>
</div>

<!-- APP -->
<div id="app" style="display:none">

<div class="panel">
  <strong>People here for <span id="interestLabel"></span></strong>
  <div id="lobby"></div>
</div>

<div class="panel">
  <strong>Group Chat</strong>
  <div id="chat"></div>
  <input id="msg" placeholder="Say something…">
  <button onclick="sendMessage()">Send</button>
</div>

<div class="panel">
  <strong>Pick a place to meet</strong>
  <div id="venues"></div>
</div>

<button class="secondary exit" onclick="exit()">Exit</button>

</div>
</div>

<script>
const supabase = window.supabase.createClient(
  'https://ggirvskmmgeegjhstiqe.supabase.co',
  'sb_publishable_2iQ5bRLoZa9rlmk2m67tMw_5cgYW5H9'
);

let USER = {};

async function join() {
  USER.username = name.value.trim();
  USER.interest = interest.value.trim().toLowerCase();
  if(!USER.username || !USER.interest) return;

  await supabase.fro
